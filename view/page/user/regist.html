<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>会员注册</title>
</head>

<body>
    <form action="/user/regist" method="post">
        <label for="username">用户名：</label>
        <input type="text" name="username" id="username">
        <label for="password">密码：</label>
        <input type="password" name="password" id="password">
        <label for="repwd">确认密码：</label>
        <input type="password" name="repwd" id="repwd">
        <label for="email">电子邮箱：</label>
        <input type="text" name="email" id="email">
        <label for="phone">手机号码：</label>
        <input type="text" name="phone" id="phone">
        <input type="submit" value="注册" id="sub_btn">
    </form>

    <p id="msg" style="display: none;">{{ . }}</p>

    <script src="/static/js/jquery-1.12.4.min.js"></script>
    <script>
        $(function () {
            // 将提示信息标签显示
            if ("{{ . }}" != "") {
                $("#msg").show();
            }

            // 给注册按钮绑定单击事件
            $("#sub_btn").click(function () {

                // 获取用户输入的用户名
                var username = $("#username").val();
                // 用于验证用户名的正则表达式
                var usernameReg = /^[a-zA-Z0-9_-]{3,16}$/;
                // 判断是否符合规则
                var flag = usernameReg.test(username);
                if (!flag) {
                    alert("请输入3-16位的字母、数字、下划线或减号的用户名");
                    return false;   // 取消默认行为（提交表单行为）
                }

                // 获取用户输入的密码
                var password = $("#password").val();
                // 验证密码的正则表达式
                var passwordReg = /^[a-zA-Z0-9_-]{6,18}$/;
                // 判断是否符合规则
                if (!passwordReg.test(password)) {
                    alert("请输入6-18位的字母、数字、下划线或减号的密码")
                    return false;   // 取消默认行为（提交表单行为）
                }

                // 获取用户输入的确认密码
                var repwd = $("#repwd").val();
                if (repwd == "") {
                    alert("确认密码不能为空");
                    return false;   // 取消默认行为（提交表单行为）
                }

                // 判断两次输入的密码是否一致
                if (repwd != password) {
                    // 将确认密码框清空
                    $("#repwd").val("");
                    alert("两次输入的密码不一致");
                    return false;   // 取消默认行为（提交表单行为）
                }

                // 获取用户输入的邮箱
                var email = $("#email").val();
                // 验证邮箱的正则表达式
                var emailReg = /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;
                // 判断是否符合规则
                if (!emailReg.test(email)) {
                    alert("邮箱格式不正确");
                    return false;   // 取消默认行为（提交表单行为）
                }

                // 获取用户输入的电话号码
                var phone = $("#phone").val();
                // 验证密码的正则表达式
                var phoneReg = /^1[3|4|5|7|8][0-9]{9}$/;
                // 判断是否符合规则
                if (!phoneReg.test(phone)) {
                    alert("电话号码格式不正确")
                    return false;   // 取消默认行为（提交表单行为）
                }
            });
        });
    </script>
</body>

</html>